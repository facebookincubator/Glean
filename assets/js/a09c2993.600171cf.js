"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5899],{15680:(e,n,t)=>{t.r(n),t.d(n,{MDXContext:()=>c,MDXProvider:()=>f,mdx:()=>g,useMDXComponents:()=>u,withMDXComponents:()=>d});var r=t(96540);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(){return o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(this,arguments)}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var c=r.createContext({}),d=function(e){return function(n){var t=u(n.components);return r.createElement(e,o({},n,{components:t}))}},u=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},f=function(e){var n=u(e.components);return r.createElement(c.Provider,{value:n},e.children)},m="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},h=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=u(t),f=a,m=d["".concat(i,".").concat(f)]||d[f]||p[f]||o;return t?r.createElement(m,s(s({ref:n},c),{},{components:t})):r.createElement(m,s({ref:n},c))}));function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=h;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[m]="string"==typeof e?e:a,i[1]=s;for(var c=2;c<o;c++)i[c]=t[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}h.displayName="MDXCreateElement"},67555:(e,n,t)=>{t.d(n,{D4:()=>i,Lw:()=>s,gD:()=>l});var r=t(96540),a=t(14423);let o;function i(e){return r.createElement("a",{href:o+e.file},e.file)}function s(e){return r.createElement("a",{href:o+e.file},e.children)}o=(0,a.isInternal)()?"https://www.internalfb.com/code/fbsource/fbcode/":"https://github.com/facebookincubator/Glean/tree/master/";const l=e=>{let{children:n,internal:t,external:o}=e;return(0,a.fbContent)({internal:r.createElement("code",null,t),external:r.createElement("code",null,o)})}},86740:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>s,metadata:()=>c,toc:()=>u});var r=t(58168),a=(t(96540),t(15680)),o=t(14423),i=t(67555);const s={id:"introduction",title:"Introduction",sidebar_label:"Introduction"},l=void 0,c={unversionedId:"introduction",id:"introduction",title:"Introduction",description:"This is the Glean documentation. It describes all aspects of the",source:"@site/docs/introduction.md",sourceDirName:".",slug:"/introduction",permalink:"/docs/introduction",draft:!1,editUrl:"https://github.com/facebookincubator/Glean/tree/main/glean/website/docs/introduction.md",tags:[],version:"current",frontMatter:{id:"introduction",title:"Introduction",sidebar_label:"Introduction"},sidebar:"someSidebar",next:{title:"Building Glean",permalink:"/docs/building"}},d={},u=[{value:"Overview",id:"overview",level:2},{value:"Components",id:"components",level:2}],f={toc:u},m="wrapper";function p(e){let{components:n,...t}=e;return(0,a.mdx)(m,(0,r.A)({},f,t,{components:n,mdxType:"MDXLayout"}),(0,a.mdx)(o.FbInternalOnly,{mdxType:"FbInternalOnly"},(0,a.mdx)("p",null,"This is the Glean documentation. It describes all aspects of the\nsystem, including how to write queries and schemas, and how\nto use the included command-line tools. Use the navigation on the left\nto find all the sections."),(0,a.mdx)("p",null,"If you found yourself here by mistake, go back to the\nmain ",(0,a.mdx)("a",{parentName:"p",href:"https://www.internalfb.com/wiki/Glean/"},"Glean Wiki"),".")),(0,a.mdx)("p",null,"Just want to get started and read the docs later? Jump to ",(0,a.mdx)("a",{parentName:"p",href:"/docs/building"},"Building\nGlean"),"."),(0,a.mdx)("h2",{id:"overview"},"Overview"),(0,a.mdx)("p",null,"Glean is a system for working with facts about source code. It is\ndesigned for collecting and storing detailed information about code\nstructure, and providing access to the data to power tools and\nexperiences from online IDE features to offline code analysis."),(0,a.mdx)("p",null,"For example, Glean can return results for queries that your IDE might\nneed to perform, such as:"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("em",{parentName:"li"},"Where is the definition of this method?")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("em",{parentName:"li"},"Where are all the callers of this function?")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("em",{parentName:"li"},"Who inherits from this class?")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("em",{parentName:"li"},"What are all the declarations in this file?"))),(0,a.mdx)("p",null,"Moreover, Glean can return results for these kinds of queries\naccurately and efficiently on a large-scale codebase."),(0,a.mdx)("p",null,"But Glean isn't limited to storing particular kinds of data, or\nanswering particular queries. Glean comes with indexers and schemas\nfor some languages which support queries like the examples above, but\nyou can also define your own schemas and store whatever data you like,\nperhaps augmenting the data that existing indexers collect.  So, for\nexample, you could store test coverage data or profiling data."),(0,a.mdx)("p",null,"Glean's powerful query language means that you can build tools around\ncomplex queries of the underlying data. For example, you could search\nfor dead code, write code linters, API migration tools or refactoring\ntools, all by using Glean queries instead of a compiler API to inspect\nthe code structure."),(0,a.mdx)("h2",{id:"components"},"Components"),(0,a.mdx)("p",null,"Glean consists of the following:"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("p",{parentName:"li"},"An ",(0,a.mdx)("strong",{parentName:"p"},"efficient storage backend")," built on\n",(0,a.mdx)("a",{parentName:"p",href:"https://rocksdb.org/"},"RocksDB"),", for storing facts. Facts are\nimmutable terms described by user-defined schemas, and form a\nDAG. Facts are automatically de-duplicated by the storage\nbackend. Think of it as being able to store and query the AST of\nyour code, efficiently and with full type-safety",(0,a.mdx)("sup",{parentName:"p",id:"fnref-1"},(0,a.mdx)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1")),".")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("p",{parentName:"li"},"A query engine implementing our ",(0,a.mdx)("strong",{parentName:"p"},(0,a.mdx)("a",{parentName:"strong",href:"/docs/angle/intro"},"declarative query language\nAngle")),".  Angle is a logic language with similarities\nto Datalog, but with extensions that make it suitable for building\ncomplex queries over Glean data",(0,a.mdx)("sup",{parentName:"p",id:"fnref-2"},(0,a.mdx)("a",{parentName:"sup",href:"#fn-2",className:"footnote-ref"},"2")),".  Like in Datalog, Glean can\nderive new facts automatically by ",(0,a.mdx)("a",{parentName:"p",href:"/docs/derived"},"defining rules")," using\nAngle.")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("p",{parentName:"li"},"A ",(0,a.mdx)("strong",{parentName:"p"},(0,a.mdx)("a",{parentName:"strong",href:"/docs/server"},"server"))," that manages multiple databases on disk, and\nserves requests from clients to create, write, and query\ndatabases. The server currently uses Thrift, but there's no reason\nthere couldn't also be servers exposing other protocols in the\nfuture.  The server is designed to be deployed at scale, serving\nreplicated databases to large numbers of clients.")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("p",{parentName:"li"},"An ",(0,a.mdx)("strong",{parentName:"p"},(0,a.mdx)("a",{parentName:"strong",href:"/docs/shell"},"interactive shell"))," where you can type queries and explore\nthe data.")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("p",{parentName:"li"},"A ",(0,a.mdx)("strong",{parentName:"p"},(0,a.mdx)("a",{parentName:"strong",href:"/docs/cli"},"command-line tool"))," for creating, writing, and querying\ndatabases, either directly or by connecting to the server.")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("p",{parentName:"li"},"Several ",(0,a.mdx)("strong",{parentName:"p"},(0,a.mdx)(i.Lw,{file:"glean/schema/source",mdxType:"SrcFileLink"},"example schemas"))," for common programming languages, and\n",(0,a.mdx)("strong",{parentName:"p"},(0,a.mdx)("a",{parentName:"strong",href:"/docs/indexer/intro"},"indexers"))," for some of those.  Note that Glean\ndoesn't force all the data into a single schema; there can be\narbitrary amounts of language-specific detail in the schema for each\nlanguage. Language-neutral abstractions can be built by ",(0,a.mdx)(i.Lw,{file:"glean/schema/source/codemarkup.angle",mdxType:"SrcFileLink"},"deriving facts using Angle"),".")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("p",{parentName:"li"},(0,a.mdx)("strong",{parentName:"p"},(0,a.mdx)(i.Lw,{file:"glean/glass",mdxType:"SrcFileLink"},"Glass")),",\na language-agnostic symbol server. Glass is a server layer on top of\nGlean that exposes an API for performing common language-independent\nqueries over Glean data, such as listing the symbols in a source\nfile. Glass can be used as the basis for language tools; in fact\nGlass is used to power our Glean-based LSP server.")),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("p",{parentName:"li"},"A ",(0,a.mdx)("strong",{parentName:"p"},(0,a.mdx)(i.Lw,{file:"glean/lsp",mdxType:"SrcFileLink"},"generic LSP\nserver")),", built using Glean and Glass. This can be\nused to browse a large codebase in ",(0,a.mdx)("a",{parentName:"p",href:"https://code.visualstudio.com/"},"VS\nCode"),(0,a.mdx)("sup",{parentName:"p",id:"fnref-3"},(0,a.mdx)("a",{parentName:"sup",href:"#fn-3",className:"footnote-ref"},"3")),": index the code using\nGlean, and connect VS Code to the LSP server to provide common\ncode-navigation features such as go-to-definition, find-references,\nand symbol search."))),(0,a.mdx)("div",{className:"footnotes"},(0,a.mdx)("hr",{parentName:"div"}),(0,a.mdx)("ol",{parentName:"div"},(0,a.mdx)("li",{parentName:"ol",id:"fn-1"},"while we could in principle store the full AST, for efficiency\nreasons we typically store only the parts we need for the clients we\nwant to support. Usually that means things like the locations of\ndefinitions and cross-references, but not expressions.",(0,a.mdx)("a",{parentName:"li",href:"#fnref-1",className:"footnote-backref"},"\u21a9")),(0,a.mdx)("li",{parentName:"ol",id:"fn-2"},"If you're familiar with Datalog, it's worth noting that\ncurrently Angle is limited to non-recursive queries only.",(0,a.mdx)("a",{parentName:"li",href:"#fnref-2",className:"footnote-backref"},"\u21a9")),(0,a.mdx)("li",{parentName:"ol",id:"fn-3"},"Or any IDE that supports LSP.",(0,a.mdx)("a",{parentName:"li",href:"#fnref-3",className:"footnote-backref"},"\u21a9")))))}p.isMDXComponent=!0},80510:function(e,n,t){var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(n){o(n)}}function s(e){try{l(r.throw(e))}catch(n){o(n)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}l((r=r.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.getSpecInfo=void 0;const a=t(88266);n.getSpecInfo=function(e){return r(this,void 0,void 0,(function*(){return yield a.call({module:"bloks",api:"getSpecInfo",args:{styleId:e}})}))}},88266:function(e,n){var t=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(n){o(n)}}function s(e){try{l(r.throw(e))}catch(n){o(n)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}l((r=r.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.call=void 0;let r=!1,a=0;const o={};n.call=function(e){return t(this,void 0,void 0,(function*(){if("staticdocs.thefacebook.com"!==window.location.hostname&&"localhost"!==window.location.hostname)return Promise.reject(new Error("Not running on static docs"));r||(r=!0,window.addEventListener("message",(e=>{if("static-docs-bridge-response"!==e.data.event)return;const n=e.data.id;n in o||console.error(`Recieved response for id: ${n} with no matching receiver`),"response"in e.data?o[n].resolve(e.data.response):o[n].reject(new Error(e.data.error)),delete o[n]})));const n=a++,t=new Promise(((e,t)=>{o[n]={resolve:e,reject:t}})),i={event:"static-docs-bridge-call",id:n,module:e.module,api:e.api,args:e.args},s="localhost"===window.location.hostname?"*":"https://www.internalfb.com";return window.parent.postMessage(i,s),t}))}},70680:function(e,n,t){var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(n){o(n)}}function s(e){try{l(r.throw(e))}catch(n){o(n)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}l((r=r.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.reportFeatureUsage=n.reportContentCopied=void 0;const a=t(88266);n.reportContentCopied=function(e){return r(this,void 0,void 0,(function*(){const{textContent:n}=e;try{yield a.call({module:"feedback",api:"reportContentCopied",args:{textContent:n}})}catch(t){}}))},n.reportFeatureUsage=function(e){return r(this,void 0,void 0,(function*(){const{featureName:n,id:t}=e;console.log("used feature");try{yield a.call({module:"feedback",api:"reportFeatureUsage",args:{featureName:n,id:t}})}catch(r){}}))}},14423:function(e,n,t){var r=this&&this.__createBinding||(Object.create?function(e,n,t,r){void 0===r&&(r=t),Object.defineProperty(e,r,{enumerable:!0,get:function(){return n[t]}})}:function(e,n,t,r){void 0===r&&(r=t),e[r]=n[t]}),a=this&&this.__setModuleDefault||(Object.create?function(e,n){Object.defineProperty(e,"default",{enumerable:!0,value:n})}:function(e,n){e.default=n}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&r(n,e,t);return a(n,e),n};Object.defineProperty(n,"__esModule",{value:!0}),n.OssOnly=n.FbInternalOnly=n.getEphemeralDiffNumber=n.hasEphemeralDiffNumber=n.isInternal=n.validateFbContentArgs=n.fbInternalOnly=n.fbContent=n.inpageeditor=n.feedback=n.uidocs=n.bloks=void 0,n.bloks=o(t(80510)),n.uidocs=o(t(3730)),n.feedback=o(t(70680)),n.inpageeditor=o(t(45458));const i=["internal","external"];function s(e){return c(e),d()?"internal"in e?l(e.internal):[]:"external"in e?l(e.external):[]}function l(e){return"function"==typeof e?e():e}function c(e){if("object"!=typeof e)throw new Error(`fbContent() args must be an object containing keys: ${i}. Instead got ${e}`);if(!Object.keys(e).find((e=>i.find((n=>n===e)))))throw new Error(`No valid args found in ${JSON.stringify(e)}. Accepted keys: ${i}`);const n=Object.keys(e).filter((e=>!i.find((n=>n===e))));if(n.length>0)throw new Error(`Unexpected keys ${n} found in fbContent() args. Accepted keys: ${i}`)}function d(){try{return Boolean(!1)}catch(e){return console.log("process.env.FB_INTERNAL couldn't be read, maybe you forgot to add the required webpack EnvironmentPlugin config?",e),!1}}function u(){try{return null}catch(e){return console.log("process.env.PHABRICATOR_DIFF_NUMBER couldn't be read, maybe you forgot to add the required webpack EnvironmentPlugin config?",e),null}}n.fbContent=s,n.fbInternalOnly=function(e){return s({internal:e})},n.validateFbContentArgs=c,n.isInternal=d,n.hasEphemeralDiffNumber=function(){return Boolean(u())},n.getEphemeralDiffNumber=u,n.FbInternalOnly=function(e){return d()?e.children:null},n.OssOnly=function(e){return d()?null:e.children}},45458:function(e,n,t){var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(n){o(n)}}function s(e){try{l(r.throw(e))}catch(n){o(n)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}l((r=r.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.submitDiff=void 0;const a=t(88266);n.submitDiff=function(e){return r(this,void 0,void 0,(function*(){const{file_path:n,new_content:t,project_name:r,diff_number:o}=e;try{return yield a.call({module:"inpageeditor",api:"createPhabricatorDiffApi",args:{file_path:n,new_content:t,project_name:r,diff_number:o}})}catch(i){throw new Error(`Error occurred while trying to submit diff. Stack trace: ${i}`)}}))}},3730:function(e,n,t){var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(n){o(n)}}function s(e){try{l(r.throw(e))}catch(n){o(n)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}l((r=r.apply(e,n||[])).next())}))};Object.defineProperty(n,"__esModule",{value:!0}),n.getApi=n.docsets=void 0;const a=t(88266);n.docsets={BLOKS_CORE:"887372105406659"},n.getApi=function(e){return r(this,void 0,void 0,(function*(){const{name:n,framework:t,docset:r}=e;return yield a.call({module:"uidocs",api:"getApi",args:{name:n,framework:t,docset:r}})}))}}}]);